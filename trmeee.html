<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>3D Heart</title>

<style>
  body{
    margin:0;
    overflow:hidden;
    background:#000;
    touch-action:none;
  }

  /* Quote (nh·ªè v·ª´a, r√µ, kh√¥ng che tim nhi·ªÅu) */
  #quote{
    position:absolute;
    top:58%;
    left:50%;
    transform:translate(-50%,-50%);
    color:rgba(255,255,255,0.92);
    font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Arial,sans-serif;
    text-align:center;
    font-size:14px;          /* ‚úÖ b√© v·ª´a */
    letter-spacing:0.4px;
    line-height:1.55;
    max-width:78%;
    z-index:10;
    opacity:0;
    animation:fadeInOut 7s ease-in-out infinite;
    text-shadow:0 0 10px rgba(255,80,140,0.25);
    user-select:none;
    pointer-events:none;
  }

  @keyframes fadeInOut{
    0%{opacity:0;}
    18%{opacity:1;}
    82%{opacity:1;}
    100%{opacity:0;}
  }
</style>
</head>

<body>
  <div id="quote">
    Hope you'd be more confident about yourself.<br>
    Let‚Äôs just be whoever you wanted to be!<br>
    Âä†Ê≤π üíñ
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script>
    const scene = new THREE.Scene();
    scene.background = new THREE.Color(0x000000);

    const camera = new THREE.PerspectiveCamera(55, window.innerWidth/window.innerHeight, 0.1, 100);
    camera.position.set(0, 0, 5);

    const renderer = new THREE.WebGLRenderer({ antialias:true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.setPixelRatio(Math.min(2, window.devicePixelRatio || 1));
    document.body.appendChild(renderer.domElement);

    // ‚úÖ N√©t h∆°n: l·∫•y ƒëi·ªÉm g·∫ßn b·ªÅ m·∫∑t h∆°n (threshold nh·ªè) + tƒÉng tries ƒë·ªÉ ƒë·ªß ƒëi·ªÉm
    function heartGeometry(targetCount=26000){
      const pts = [];
      let tries = 0;

      const threshold = 0.012; // ‚úÖ nh·ªè h∆°n -> tim s·∫Øc n√©t, ra h√¨nh r√µ
      const maxTries = targetCount * 220;

      while (pts.length < targetCount && tries < maxTries){
        tries++;

        const x = THREE.MathUtils.randFloat(-1.6, 1.6);
        const y = THREE.MathUtils.randFloat(-1.6, 1.6);
        const z = THREE.MathUtils.randFloat(-1.6, 1.6);

        const f =
          Math.pow(x*x + 2.25*y*y + z*z - 1, 3)
          - x*x*Math.pow(z, 3)
          - (9/80)*y*y*Math.pow(z, 3);

        if (Math.abs(f) < threshold){
          pts.push(x, y, z);
        }
      }

      const geo = new THREE.BufferGeometry();
      geo.setAttribute("position", new THREE.Float32BufferAttribute(pts, 3));
      return geo;
    }

    const geometry = heartGeometry(26000); // v·∫´n nhi·ªÅu h·∫°t nh∆∞ng n√©t h∆°n
    const material = new THREE.PointsMaterial({
      size: 0.014,            // ‚úÖ h·∫°t nh·ªè h∆°n -> nh√¨n ‚Äúm·ªãn‚Äù
      color: 0xff3366,
      transparent: true,
      opacity: 0.92,
      depthWrite: false
    });

    const heart = new THREE.Points(geometry, material);

    // ‚úÖ Tim ƒë·ª©ng th·∫≥ng
    heart.rotation.x = Math.PI / 2;

    scene.add(heart);

    let t = 0;
    function animate(){
      requestAnimationFrame(animate);
      t += 0.02;

      // ‚úÖ Xoay nh·∫π, ƒë·ª´ng xoay lung tung
      heart.rotation.y += 0.010;

      // ‚úÖ ƒê·∫≠p nh·∫π th√¥i cho ‚Äútinh‚Äù
      const s = 1 + 0.02 * Math.sin(t * 2.2);
      heart.scale.set(s, s, s);

      renderer.render(scene, camera);
    }
    animate();

    window.addEventListener("resize", () => {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
      renderer.setPixelRatio(Math.min(2, window.devicePixelRatio || 1));
    });
  </script>
</body>
</html>
