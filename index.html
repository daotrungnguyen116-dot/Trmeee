<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>3D Heart</title>

<style>
  body{
    margin:0;
    overflow:hidden;
    background:#000;
    touch-action:none;
  }

  /* Quote */
  #quote{
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%,-50%);
    color: rgba(255,255,255,0.95);
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Arial, sans-serif;
    text-align: center;
    font-size: 20px;
    letter-spacing: 0.6px;
    line-height: 1.65;
    max-width: 84%;
    z-index: 10;

    /* effects */
    opacity: 0;
    animation:
      fadeInOut 7s ease-in-out infinite,
      floaty 3.2s ease-in-out infinite;
    text-shadow: 0 0 14px rgba(255,80,140,0.35);
    user-select: none;
    pointer-events: none;
  }

  @keyframes fadeInOut{
    0%   { opacity: 0; }
    18%  { opacity: 1; }
    82%  { opacity: 1; }
    100% { opacity: 0; }
  }

  @keyframes floaty{
    0%,100% { transform: translate(-50%,-50%) translateY(0px); }
    50%     { transform: translate(-50%,-50%) translateY(-8px); }
  }
</style>
</head>

<body>
  <div id="quote">
    Hope you'd be more confident about yourself.<br>
    Letâ€™s just be whoever you wanted to be!<br>
    åŠ æ²¹ ðŸ’–
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

  <script>
    // Scene
    const scene = new THREE.Scene();
    scene.background = new THREE.Color(0x000000);

    // Camera
    const camera = new THREE.PerspectiveCamera(
      55,
      window.innerWidth / window.innerHeight,
      0.1,
      100
    );
    camera.position.set(0, 0, 5);

    // Renderer
    const renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.setPixelRatio(Math.min(2, window.devicePixelRatio || 1));
    document.body.appendChild(renderer.domElement);

    // --- Heart particles generator (implicit surface)
    // f(x,y,z) = (x^2 + (9/4)y^2 + z^2 - 1)^3 - x^2 z^3 - (9/80) y^2 z^3
    function heartGeometry(targetCount = 30000) { // gáº¥p Ä‘Ã´i háº¡t
      const pts = [];
      let tries = 0;

      // tune threshold for shape thickness
      const threshold = 0.03;

      while (pts.length < targetCount && tries < targetCount * 80) {
        tries++;

        const x = THREE.MathUtils.randFloat(-1.6, 1.6);
        const y = THREE.MathUtils.randFloat(-1.6, 1.6);
        const z = THREE.MathUtils.randFloat(-1.6, 1.6);

        const f =
          Math.pow(x*x + 2.25*y*y + z*z - 1, 3)
          - x*x*Math.pow(z, 3)
          - (9/80)*y*y*Math.pow(z, 3);

        if (Math.abs(f) < threshold) {
          pts.push(x, y, z);
        }
      }

      const geo = new THREE.BufferGeometry();
      geo.setAttribute("position", new THREE.Float32BufferAttribute(pts, 3));
      return geo;
    }

    const geometry = heartGeometry(30000);

    const material = new THREE.PointsMaterial({
      size: 0.018,
      color: 0xff3366,
      transparent: true,
      opacity: 0.92,
      depthWrite: false
    });

    const heart = new THREE.Points(geometry, material);

    // âœ… Dá»±ng tim Ä‘á»©ng tháº³ng:
    // Náº¿u tim bá»‹ "náº±m", xoay nÃ³ 90 Ä‘á»™ quanh trá»¥c X
    heart.rotation.x = Math.PI / 2;

    scene.add(heart);

    // Animation
    let t = 0;
    function animate() {
      requestAnimationFrame(animate);
      t += 0.02;

      // âœ… Xoay tim (Ä‘á»©ng tháº³ng) quanh trá»¥c Y
      heart.rotation.y += 0.012;

      // Breathing / pulse
      const s = 1 + 0.035 * Math.sin(t * 2.2);
      heart.scale.set(s, s, s);

      renderer.render(scene, camera);
    }
    animate();

    // Resize
    window.addEventListener("resize", () => {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
      renderer.setPixelRatio(Math.min(2, window.devicePixelRatio || 1));
    });
  </script>
</body>
</html>
